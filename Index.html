<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система тестирования</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-2xl text-center">
        <!-- Заголовок приложения -->
        <h1 id="app-title" class="text-3xl font-bold text-gray-800 mb-6">Система тестирования</h1>

        <!-- Начальный экран -->
        <div id="start-screen" class="space-y-4">
            <p class="text-lg text-gray-600">Нажмите кнопку ниже, чтобы начать тест.</p>
            <button id="start-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300">Начать тест</button>
        </div>

        <!-- Экран теста -->
        <div id="quiz-screen" class="hidden text-left space-y-6">
            <!-- Счетчик вопросов -->
            <p id="question-counter" class="text-sm text-gray-500 font-medium"></p>
            
            <!-- Область вопроса -->
            <h2 id="question-text" class="text-2xl font-semibold text-gray-800"></h2>

            <!-- Варианты ответов -->
            <div id="answers-container" class="space-y-3">
                <!-- Кнопки ответов будут сгенерированы здесь -->
            </div>

            <!-- Область обратной связи и кнопок -->
            <div class="mt-6 flex flex-col items-center space-y-4">
                <p id="feedback-message" class="text-lg font-medium hidden"></p>
                <button id="submit-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300 w-full max-w-xs">Ответить</button>
                <button id="next-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300 w-full max-w-xs hidden">Следующий вопрос</button>
            </div>
        </div>

        <!-- Экран результатов -->
        <div id="results-screen" class="hidden space-y-6">
            <h2 class="text-3xl font-bold text-gray-800">Тест завершен!</h2>
            <p class="text-xl text-gray-600">Ваш результат: <span id="score-text" class="font-bold text-blue-600"></span></p>
            <p id="final-message" class="text-lg font-medium"></p>
            <button id="restart-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300">Начать новый тест</button>
        </div>
    </div>

    <script>
        // Объявление переменных для элементов DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const startButton = document.getElementById('start-btn');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const submitButton = document.getElementById('submit-btn');
        const nextButton = document.getElementById('next-btn');
        const feedbackMessage = document.getElementById('feedback-message');
        const scoreText = document.getElementById('score-text');
        const restartButton = document.getElementById('restart-btn');
        const questionCounter = document.getElementById('question-counter');
        const finalMessage = document.getElementById('final-message');

        // Массив с вопросами
        const questions = [
            {
                question: "Какое основное преимущество использования облачных сервисов?",
                answers: ["Ограниченный доступ", "Высокая стоимость", "Гибкость и масштабируемость", "Низкая производительность"],
                correctAnswerIndex: 2
            },
            {
                question: "Что такое API?",
                answers: ["Интерфейс программирования приложений", "Архитектура процессов интернета", "Инфраструктура программного обеспечения", "Абсолютная программная инструкция"],
                correctAnswerIndex: 0
            },
            {
                question: "Какой язык программирования чаще всего используется для веб-разработки на стороне клиента?",
                answers: ["Python", "Java", "C++", "JavaScript"],
                correctAnswerIndex: 3
            },
            {
                question: "Что такое блокчейн?",
                answers: ["Централизованная база данных", "Распределенный реестр", "Виртуальная валюта", "Протокол шифрования"],
                correctAnswerIndex: 1
            }
        ];

        // Переменные для состояния теста
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedAnswerIndex = null;
        let testCompleted = false;

        // Функция для загрузки и отображения текущего вопроса
        function loadQuestion() {
            // Сброс состояния для нового вопроса
            selectedAnswerIndex = null;
            submitButton.disabled = false;
            submitButton.classList.remove('hidden');
            nextButton.classList.add('hidden');
            feedbackMessage.classList.add('hidden');
            answersContainer.innerHTML = ''; // Очистка предыдущих ответов

            if (currentQuestionIndex < questions.length) {
                // Отображение счетчика вопросов
                questionCounter.textContent = `Вопрос ${currentQuestionIndex + 1} из ${questions.length}`;

                const currentQuestion = questions[currentQuestionIndex];
                questionText.textContent = currentQuestion.question;

                // Создание кнопок для каждого варианта ответа
                currentQuestion.answers.forEach((answer, index) => {
                    const button = document.createElement('button');
                    button.textContent = answer;
                    button.classList.add(
                        'w-full', 'py-3', 'px-4', 'bg-gray-100', 'text-left', 'rounded-xl',
                        'transition-colors', 'duration-200', 'hover:bg-gray-200', 'focus:ring-2',
                        'focus:ring-blue-500', 'focus:outline-none', 'text-gray-800'
                    );
                    button.addEventListener('click', () => selectAnswer(index, button));
                    answersContainer.appendChild(button);
                });
            } else {
                // Если вопросы закончились, показать результаты и завершить тест
                showResults();
            }
        }

        // Функция для выбора ответа
        function selectAnswer(index, button) {
            // Сброс предыдущих выделенных ответов
            Array.from(answersContainer.children).forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500');
            });
            // Выделение текущего ответа
            button.classList.add('ring-2', 'ring-blue-500');
            selectedAnswerIndex = index;
        }

        // Функция для проверки ответа и перехода к следующему вопросу
        function submitAnswer() {
            if (selectedAnswerIndex === null) {
                feedbackMessage.textContent = "Пожалуйста, выберите ответ.";
                feedbackMessage.classList.remove('hidden');
                feedbackMessage.classList.add('text-red-500');
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            const isCorrect = selectedAnswerIndex === currentQuestion.correctAnswerIndex;

            if (isCorrect) {
                score++;
                feedbackMessage.textContent = "Верно!";
                feedbackMessage.classList.remove('text-red-500');
                feedbackMessage.classList.add('text-green-500');
            } else {
                feedbackMessage.textContent = "Неверно.";
                feedbackMessage.classList.remove('text-green-500');
                feedbackMessage.classList.add('text-red-500');
            }

            // Показать правильный ответ и отключить кнопки
            Array.from(answersContainer.children).forEach((btn, index) => {
                btn.disabled = true;
                if (index === currentQuestion.correctAnswerIndex) {
                    btn.classList.add('bg-green-200', 'border-2', 'border-green-500');
                } else if (index === selectedAnswerIndex) {
                    btn.classList.add('bg-red-200', 'border-2', 'border-red-500');
                }
            });

            feedbackMessage.classList.remove('hidden');
            submitButton.classList.add('hidden');
            nextButton.classList.remove('hidden');
        }

        // Функция для показа результатов
        function showResults() {
            // Устанавливаем флаг завершения теста
            testCompleted = true;

            quizScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            scoreText.textContent = `${score} из ${questions.length}`;

            // Отображение сообщения в зависимости от результата
            if (score === questions.length) {
                finalMessage.textContent = "Поздравляем! Вы ответили на все вопросы правильно!";
            } else if (score > questions.length / 2) {
                finalMessage.textContent = "Хороший результат! Вы можете попробовать еще раз, чтобы улучшить его.";
            } else {
                finalMessage.textContent = "Ничего страшного, попробуйте еще раз!";
            }
        }

        // Функция для перезапуска теста
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            testCompleted = false; // Сброс флага
            
            resultsScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }

        // Обработчики событий для кнопок
        startButton.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            loadQuestion();
        });

        submitButton.addEventListener('click', submitAnswer);

        nextButton.addEventListener('click', () => {
            if (!testCompleted) { // Проверка флага
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // Этот блок не должен быть достигнут, но служит для надежности
                showResults();
            }
        });

        restartButton.addEventListener('click', restartQuiz);
    </script>
</body>
</html>
